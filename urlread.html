<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Interpolation with Interaction Details</title>
    <script>
        // Function to get conversationID from URL parameters
        function getConversationIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('conversationId');
        }

        // Function to show interaction details
        function showInteractionDetails(conversationId) {
            if (typeof myClientApp !== 'undefined' && 
                myClientApp.conversations && 
                typeof myClientApp.conversations.showInteractionDetails === 'function') {
                myClientApp.conversations.showInteractionDetails(conversationId);
            } else {
                console.error('myClientApp.conversations.showInteractionDetails is not available');
                document.getElementById('errorMessage').textContent = 'Unable to show interaction details. The required function is not available.';
            }
        }

        // Execute when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Display the current URL
            document.querySelector('.ex-url').textContent = window.location.href;

            const conversationId = getConversationIdFromUrl();
            if (conversationId) {
                document.getElementById('conversationIdDisplay').textContent = conversationId;
                showInteractionDetails(conversationId);
            } else {
                document.getElementById('conversationIdDisplay').textContent = 'Not provided';
                document.getElementById('errorMessage').textContent = 'No conversationId found in URL';
            }
        });
    </script>
</head>
<body>
    <h1>URL Interpolation</h1>
    <p>For full functionality of this site it is necessary to enable JavaScript. Here are the <a href="http://www.enable-javascript.com/" target="_blank">instructions how to enable JavaScript in your web browser</a>.</p>

    <h2>URL</h2>
    <div class="ex-url"></div>

    <h2>Localization Demo</h2>
    <div class="welcome-text"></div>

    <div id="interactionDetails">
        <h2>Interaction Details</h2>
        <p>Conversation ID: <span id="conversationIdDisplay"></span></p>
        <p id="errorMessage"></p>
    </div>
</body>
</html>
